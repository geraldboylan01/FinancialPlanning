<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- This meta tag is already correct for responsive behavior -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planéir – Financial Planning Tools</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&display=swap" rel="stylesheet" />
  <link rel="prefetch" href="full-monty.html" />
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html { scroll-behavior: smooth; }
    html,body{min-height:100vh;overflow-x:hidden}
    body{font-family:'Inter',sans-serif;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:1.5rem;padding:clamp(1rem,4vw,2.5rem) 1rem;background:var(--bg);color:var(--ink)}
    @media (min-width:960px){body{justify-content:center}}
    /* ========== Tokens ========== */
    :root{
      --bg:#1a1a1a; --card:#2a2a2a; --ink:#fff; --muted:#bbb; --gold:#bfa571;
      --accentA:#00ff88; --accentB:#0099ff; --pmag1:#c000ff; --pmag2:#7f00ff;
      --shadow:0 0 25px rgba(0,255,136,.25);
    }
    /* ========== Page layout tweaks ========== */
    main{display:grid;gap:clamp(1rem,3vw,2rem);width:100%;max-width:1100px}
    /* ========== Brand hero (balanced without CTAs) ========== */
    .brand-hero{
      position:relative; isolation:isolate;
      background:
        radial-gradient(1100px 600px at 10% -20%, rgba(0,255,136,.06), transparent 60%),
        radial-gradient(800px 600px at 90% 110%, rgba(127,0,255,.08), transparent 60%),
        var(--card);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: clamp(1rem, 3.5vw, 1.8rem);
      max-width: 1100px; width: 100%;
      /* Height tuned for visual weight since buttons are gone */
      min-height: clamp(220px, 36vh, 340px);
      display: grid; place-items: center;
    }

    /* animated rim-light (subtle) */
    .brand-hero::before{
      content:""; position:absolute; inset:0; border-radius:18px; pointer-events:none;
      background: conic-gradient(from 0deg, rgba(0,255,136,.24), rgba(127,0,255,.22), rgba(0,255,136,.24));
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask-composite: exclude; -webkit-mask-composite: xor;
      padding: 1px;
      animation: rimspin 14s linear infinite;
      opacity:.52;
    }
    @keyframes rimspin{ to{ transform: rotate(360deg) } }
    @media (prefers-reduced-motion: reduce){ .brand-hero::before{ animation:none; opacity:.35 }}

    /* Layout: left lockup, right text */
    .brand-hero__content{
      width: 100%;
      display: grid;
      gap: clamp(.8rem, 2vw, 1.4rem);
      grid-template-columns: 1fr;
      align-items: center;
    }
    @media (min-width: 900px){
      .brand-hero__content{
        grid-template-columns: .9fr 1.1fr;
      }
    }

    /* Brand lockup */
    .brand-hero__lockup{
      display:flex; align-items:center; gap:.75rem; flex-wrap:wrap;
    }
    .brand-hero__logo{
      width: 42px; height: 42px; filter: drop-shadow(0 0 6px rgba(191,165,113,.35));
    }
    .brand-hero__title{
      font-family:'Cormorant Garamond', serif;
      font-weight:700; letter-spacing:.2px; margin:0;
      font-size: clamp(1.9rem, 4vw, 2.7rem);
      color: var(--gold);
    }
    .brand-hero__tag{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.15);
      border-radius:999px; padding:.28rem .6rem; font-weight:700; font-size:.85rem; color:#eee;
    }

    /* Right column content */
    .brand-hero__kicker{
      margin:0 0 .25rem 0;
      font-weight: 800; color:#eaeaea;
      font-size: clamp(1.05rem, 2.2vw, 1.2rem);
    }
    .brand-hero__lede{
      margin:.2rem 0 .5rem 0;
      color:#e6e6e6; line-height:1.55;
      max-width: 60ch;
    }

    /* Bullets: custom markers for rhythm */
    .brand-hero__list{
      margin:.35rem 0 0 0;
      padding:0; list-style: none;
    }
    .brand-hero__list li{
      position:relative; padding-left: 1.15rem; line-height:1.45;
    }
    .brand-hero__list li + li{ margin-top:.25rem; }
    .brand-hero__list li::before{
      content:"•"; position:absolute; left:0; top:0; color:#cfe; opacity:.9;
    }

    /* Tighten on small phones */
    @media (max-width: 360px){
      .brand-hero{ min-height: 220px; }
      .brand-hero__title{ letter-spacing: 0; }
      .brand-hero__list li{ padding-left: 1rem; }
    }

    .btn-primary{display:inline-flex;align-items:center;justify-content:center;gap:.5rem;padding:.85rem 1.35rem;border-radius:14px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--accentA),var(--accentB));color:#111;font-weight:800;text-decoration:none;box-shadow:0 0 22px rgba(0,255,136,.6);transition:transform .2s,box-shadow .2s,filter .2s}
    .btn-primary:hover,.btn-primary:focus-visible{transform:scale(1.03);box-shadow:0 0 28px rgba(0,255,136,.85);outline:none}
    /* ========== HERO (Full Monty) ========== */
    .hero{display:grid;gap:1rem;align-items:center;grid-template-columns:1fr}
    @media (min-width:960px){.hero{grid-template-columns:1.1fr .9fr}}
    .hero-copy h1{font-family:'Cormorant Garamond',serif;font-size:clamp(2rem,3.5vw,2.75rem);color:var(--gold);margin-bottom:.25rem}
    .hero-copy p.lead{color:#ddd;font-size:1.05rem;line-height:1.5;margin-bottom:.75rem}
    .hero-card{position:relative;overflow:hidden;background:linear-gradient(135deg,var(--pmag1),var(--pmag2));border-radius:18px;color:#fff;padding:1.2rem 1.4rem;box-shadow:0 0 28px rgba(192,0,255,.35);transition:transform .25s,box-shadow .25s,filter .25s}
    .hero-card:hover{transform:translateY(-2px);box-shadow:0 0 38px rgba(192,0,255,.55);filter:brightness(1.06)}
    .hero-card::after{content:"";position:absolute;inset:-40%;background:conic-gradient(from 0deg at 50% 50%,transparent 0 35%,rgba(255,255,255,.08) 36% 40%,transparent 41% 100%);animation:spin 8s linear infinite;pointer-events:none}
    @keyframes spin{to{transform:rotate(360deg)}}
    .hero-top{display:flex;align-items:center;justify-content:space-between;gap:.75rem}
    .badge{display:inline-flex;align-items:center;gap:.5rem;background:rgba(0,0,0,.25);border:1px solid rgba(255,255,255,.15);padding:.35rem .6rem;border-radius:999px;font-weight:700;font-size:.85rem}
    .badge .dot{width:.5rem;height:.5rem;border-radius:50%;background:#00ffc2;box-shadow:0 0 8px rgba(0,255,194,.9)}
    .hero-title{font-weight:800;font-size:1.4rem;letter-spacing:.2px}
    .hero-list{margin:.75rem 0 .9rem 1.1rem;line-height:1.35}
    .hero-list li{margin:.25rem 0}
    .hero-cta{display:flex;gap:.75rem;flex-wrap:wrap;align-items:center}
    .hero-cta .btn-primary{display:inline-flex;align-items:center;gap:.6rem;padding:.9rem 1.4rem;border-radius:14px;border:none;cursor:pointer;background:linear-gradient(135deg,var(--accentA),var(--accentB));color:#1a1a1a;font-weight:800;font-size:1.05rem;box-shadow:0 0 22px rgba(0,255,136,.6);transition:transform .2s,box-shadow .2s;text-decoration:none;animation:breathe 10s ease-in-out infinite}
    .hero-cta .btn-primary:hover{transform:scale(1.03);box-shadow:0 0 28px rgba(0,255,136,.85)}
    .hero-cta .hint{color:#f3f3f3;opacity:.85;font-size:.95rem}
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.015)}}
    /* ========== Secondary tools section ========== */
    .tools-head{display:flex;align-items:center;gap:.75rem;margin-top:.25rem;margin-bottom:.25rem}
    .tools-head .rule{flex:1;height:1px;background:linear-gradient(90deg,#444,transparent)}
    .tools-head .label{color:#ccc;font-weight:700;font-size:.95rem;text-transform:uppercase;letter-spacing:.08em}
    .container{display:flex;flex-wrap:wrap;justify-content:center;gap:1rem}
    .bubble{width:36vw;max-width:200px;height:36vw;max-height:200px;border-radius:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;transition:transform .25s,box-shadow .25s,filter .25s;background:linear-gradient(135deg,#2e2e2e,#3a3a3a);box-shadow:0 0 16px rgba(0,0,0,.35);filter:saturate(.7) brightness(.95)}
    .bubble:hover,.bubble:focus-visible{transform:translateY(-2px) scale(1.03);background:linear-gradient(135deg,var(--accentA),var(--accentB));box-shadow:0 0 28px rgba(0,255,136,.55);filter:none;outline:2px solid var(--accentA);outline-offset:4px}
    .bubble-icon{font-size:44px;line-height:1;margin-bottom:.4rem}
    .bubble span{font-weight:700;text-align:center;font-size:16px}
    @media (max-width:480px){.bubble{width:100%;max-width:280px;aspect-ratio:1}}
    /* Accessibility focus */
    a:focus-visible,.btn-primary:focus-visible{outline:2px solid var(--accentA);outline-offset:3px;box-shadow:0 0 0 3px rgba(0,255,136,.25)}
    /* ——— Modal Base ——— */
    .modal[hidden]{ display:none !important; }
    .modal{
      position: fixed; inset: 0; z-index: 1000;
    }
    .modal__backdrop{
      position:absolute; inset:0;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(2px);
      cursor: pointer;
    }
    .modal__dialog{
      position:relative; z-index:1;
      width: min(96vw, 720px);
      max-height: 92vh;
      margin: 6vh auto;
      background: var(--card);
      color: var(--ink);
      border-radius: 16px;
      box-shadow: var(--shadow);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr;
    }
    .modal__header{
      display:flex; align-items:center; justify-content:space-between;
      padding: .8rem 1rem; border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .modal__header h3{ margin:0; font-size:1.05rem; color:#fff; }
    .modal__close{
      appearance:none; border:0; background:transparent; color:#fff; font-size:1.1rem;
      cursor:pointer; padding:.25rem .4rem; border-radius:8px;
    }
    .modal__close:hover,.modal__close:focus-visible{
      outline:2px solid var(--pmag2); outline-offset:2px;
    }
    .modal__body{
      overflow: auto;
      -webkit-overflow-scrolling: touch;
      padding: .9rem 1rem 1rem;
    }
    .modal__video{
      position: relative; width: 100%;
      border-radius: 12px; overflow:hidden; background:#000;
      max-height: 80vh;
    }
    .modal__video::before{
      content:""; display:block; width:100%; aspect-ratio: 9 / 16;
    }
    .modal__video iframe{
      position:absolute; inset:0; width:100%; height:100%; border:0;
    }
    .modal__caption{
      margin:.65rem 0 0; color: var(--muted); font-size:.95rem;
    }
    .unmute-hint{
      margin-top: .55rem;
      font-size: .9rem;
      color: var(--muted);
      opacity: .95;
      transition: opacity .3s;
    }
    .unmute-hint[hidden]{ opacity: 0; height: 0; margin: 0; overflow: hidden; }

    /* ——— Full-screen mobile modal ——— */
    @media (max-width: 720px){
      .modal__dialog{
        width: 100vw;
        height: 100vh;
        max-height: none;
        margin: 0;
        border-radius: 0;
        grid-template-rows: auto 1fr;
      }
      .modal__header{
        position: sticky;
        top: 0;
        background: var(--card);
      }
    .modal__body{ padding-bottom: env(safe-area-inset-bottom, 12px); }
    .modal__video{ max-height: none; }
    }
/* ——— Learn section heading ——— */
.learn{ margin: clamp(16px, 4vw, 28px) 0; }
.learn__heading{
  margin: 0 0 10px;
  font-family: 'Cormorant Garamond', serif;
  font-size: clamp(1.4rem, 2.6vw, 1.8rem);
  color: var(--gold);
}

/* ——— Grid layout ——— */
.learn__grid{
  display: grid;
  gap: clamp(12px, 2.5vw, 18px);
  grid-template-columns: 1fr;
}
@media (min-width: 720px){ .learn__grid{ grid-template-columns: repeat(3, 1fr); }}

/* ========== Card base ========== */
.learn-card{
  background: var(--card);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 16px;
  box-shadow: var(--shadow);
  overflow: hidden;
  min-height: 100%;
  transition: transform .25s ease, box-shadow .25s ease;
}

/* Lift the entire card slightly on hover/focus of the thumb */
.learn-card:hover,
.learn-card:has(.yt-thumb:focus-visible){
  transform: translateY(-2px);
  box-shadow: 0 0 28px rgba(127,0,255,.35), var(--shadow);
}

/* ========== Portrait thumb ========== */
.learn-card--portrait .yt-thumb{
  position: relative;
  display: block;
  width: 100%;
  aspect-ratio: 9 / 16;
  background: #000;
  background-size: cover;
  background-position: center;
  border: 0;
  cursor: pointer;
  overflow: hidden;
  /* Smooth poster zoom + tone shift */
  transition: transform .35s ease, filter .35s ease;
}

/* Focus vignette + poster zoom layers */
.yt-thumb::before, .yt-thumb::after{
  content:""; position:absolute; inset:0;
  pointer-events:none;
  transition: opacity .35s ease;
}

/* ::before = subtle vignette that intensifies on hover */
.yt-thumb::before{
  background: radial-gradient(120% 100% at 50% 60%, rgba(0,0,0,0) 40%, rgba(0,0,0,.45) 100%);
  opacity: .35;  /* base */
}
/* ::after = soft top/bottom gradient for readability */
.yt-thumb::after{
  background: linear-gradient(to bottom, rgba(0,0,0,.55) 0%, rgba(0,0,0,0) 40%, rgba(0,0,0,.35) 100%);
  opacity: .55;  /* base */
}

.yt-thumb:hover,
.yt-thumb:focus-visible{
  transform: scale(1.015);
  filter: saturate(1.05) contrast(1.02);
}
.yt-thumb:hover::before,
.yt-thumb:focus-visible::before{ opacity: .6; }
.yt-thumb:hover::after,
.yt-thumb:focus-visible::after{ opacity: .75; }

/* ========== Play button: brighten + glow on hover/focus ========== */
.yt-thumb__play{
  position: absolute; inset:auto auto 10px 10px;
  display: grid; place-items:center;
  width: 48px; height: 48px; border-radius: 50%;
  background: rgba(0,0,0,.6);
  border: 2px solid var(--pmag2);
  color:#fff; font-size: 20px; line-height: 1;
  box-shadow: 0 0 18px rgba(127,0,255,.45);
  transition: transform .25s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
}
.yt-thumb__play::before{
  content:""; position:absolute; inset:-6px;
  border-radius:50%;
  border: 2px solid rgba(127,0,255,.4);
  animation: pulse 1.8s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{ transform: scale(1); opacity: .6 }
  50%   { transform: scale(1.08); opacity: .2 }
}
.yt-thumb:hover .yt-thumb__play,
.yt-thumb:focus-visible .yt-thumb__play{
  background: rgba(0,0,0,.75);
  border-color: #c083ff; /* brighter ring */
  box-shadow: 0 0 28px rgba(192,131,255,.65), 0 0 0 2px rgba(192,131,255,.25) inset;
  transform: scale(1.06);
}

/* Keyboard focus outline on the thumb itself */
.yt-thumb:focus-visible{
  outline: 2px solid var(--pmag2);
  outline-offset: -2px;
}

/* ========== Top-centered title + description ========== */
.learn-card__overlay{
  position: absolute; left: 0; right: 0; top: 0;
  /* Use grid to center text block at the top with padding */
  display: grid; place-items: start center;
  padding: 12px 12px 24px;
  text-align: center;
  /* Top gradient scrim for readability over video */
  background: linear-gradient(to bottom, rgba(0,0,0,.65) 0%, rgba(0,0,0,.0) 85%);
  pointer-events: none; /* overlay shouldn’t block clicks on the button */
}
.learn-card__title{
  margin: 0 0 4px;
  color: #fff; font-weight: 800; font-size: 1.05rem;
  text-shadow: 0 1px 2px rgba(0,0,0,.6);
}
.learn-card__text{
  margin: 0;
  color: #e6e6e6; font-size: .95rem; line-height: 1.35;
  text-shadow: 0 1px 2px rgba(0,0,0,.5);
  /* keep to 2 lines for consistency */
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}

/* ========== Badge stays top-left, above overlay ========== */
.yt-thumb__badge{
  position: absolute; top: 8px; left: 8px;
  z-index: 2;
  font-size: 11px; color:#fff;
  background: rgba(0,0,0,.55);
  padding: 5px 8px; border-radius: 999px;
  border: 1px solid rgba(255,255,255,.12);
}

/* ========== Placeholder state (no click) ========== */
.yt-thumb--placeholder{
  background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.1));
  cursor: default;
}
.yt-thumb--placeholder .yt-thumb__play{ opacity: .5; }
.yt-thumb--placeholder:hover,
.yt-thumb--placeholder:focus-visible{
  transform: none; filter: none;
}
.yt-thumb--placeholder::before,
.yt-thumb--placeholder::after{ opacity: .35; } /* subtle vignette only */

@media (max-width: 380px){
  .learn-card__overlay{ padding-top: 16px; }
}

    /* ——— Value prop inside brand hero ——— */
    .brand-hero__value{
      margin-bottom: clamp(.4rem, 1.6vw, .9rem);
      display: grid;
      gap: .45rem;
    }

    .brand-hero__headline{
      margin: 0;
      font-weight: 900;
      letter-spacing: .2px;
      color: #fff;
      font-size: clamp(1.3rem, 3vw, 1.7rem);
      line-height: 1.2;
    }

    .brand-hero__support{
      margin: 0;
      color: #eaeaea;
      opacity: .92;
      font-size: clamp(.95rem, 2vw, 1rem);
      line-height: 1.45;
      max-width: 62ch;
    }

    /* Small, subtle CTA in the hero */
    .btn-hero-mini{
      justify-self: start;
      display: inline-flex; align-items: center; gap: .5rem;
      padding: .55rem .85rem;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.06);
      color: #fff; text-decoration: none; font-weight: 800; font-size: .95rem;
      transition: transform .2s, box-shadow .2s, background .2s, border-color .2s, filter .2s;
      box-shadow: 0 0 16px rgba(0,0,0,.2);
    }

    .btn-hero-mini:hover,
    .btn-hero-mini:focus-visible{
      transform: translateY(-1px);
      background: linear-gradient(135deg, var(--accentA), var(--accentB));
      color: #111;
      border-color: transparent;
      box-shadow: 0 0 24px rgba(0,255,136,.5);
      outline: none;
    }

    /* Ensure anchor section positions nicely when scrolled to */
    #full-monty{ scroll-margin-top: 14px; }

    /* Tighten on very small screens */
    @media (max-width: 480px){
      .brand-hero__support{ max-width: none; }
      .btn-hero-mini{ font-size: .9rem; padding: .5rem .8rem; }
    }

  </style>
</head>
<body>
<main>

  <section class="brand-hero" aria-label="About Planéir">
    <div class="brand-hero__content">
      <!-- Left: brand lockup -->
      <div class="brand-hero__lockup">
        <img src="favicon.png" class="brand-hero__logo" alt="" aria-hidden="true" />
        <h1 class="brand-hero__title">Planéir</h1>
        <span class="brand-hero__tag">Irish Pension Planning</span>
      </div>

      <!-- Right: message -->
      <div class="brand-hero__text">
        <div class="brand-hero__value">
          <h2 class="brand-hero__headline">Financial planning for everyone — not just the 1%.</h2>
          <p class="brand-hero__support">
            Free tools from a planner at Ireland’s leading wealth management firm to help you master your pension and retirement path.
          </p>
          <a class="btn-hero-mini" href="#full-monty" aria-label="Jump to the Full Monty planner section">
            Start free plan
          </a>
        </div>

        <h3 class="brand-hero__kicker">🇮🇪 Built for Irish Pensions</h3>
        <p class="brand-hero__lede">
          All of our tools are designed specifically for Irish pension rules — because pensions are the most tax‑efficient way to invest in Ireland.
        </p>
        <ul class="brand-hero__list">
          <li>You don’t pay income tax on the money you contribute</li>
          <li>Your investments grow tax‑free (no 8‑year deemed disposal)</li>
          <li>You can take a portion tax‑free at retirement</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- HERO: Full Monty spotlight -->
  <section id="full-monty" class="hero" aria-label="All-in-one planner">
    <div class="hero-copy">
      <h1>Are you on track to reach financial freedom?</h1>
      <p class="lead">We project your pension under two scenarios: 1) Keep your current contributions exactly as they are, and 2) Increase to the maximum tax-relievable personal contributions. Then explore different risk profiles and retirement ages to see realistic ways to hit your freedom number (the pension needed to fund your lifestyle without a salary).</p>
    </div>

    <div class="hero-card" role="region" aria-label="Full Monty all-in-one">
      <div class="hero-top">
        <div class="badge"><span class="dot"></span> All-in-one · Recommended</div>
        <div class="hero-title">Full Monty</div>
      </div>

      <ul class="hero-list">
        <li>Two scenarios: Current vs Max tax-relievable contributions</li>
        <li>Clear result vs your freedom number, plus any shortfall or surplus</li>
        <li>Adjust risk and retirement age; download a clean PDF summary</li>
      </ul>

      <div class="hero-cta">
        <a href="full-monty.html" class="btn-primary" aria-label="Launch Full Monty wizard">Start Your Plan</a>
        <span class="hint">Takes about 2–4 minutes</span>
      </div>
    </div>
  </section>
  <!-- SECONDARY: single tools -->
  <div id="tools" class="tools-head" aria-hidden="true">
    <span class="rule"></span>
    <span class="label">Or pick a specific tool</span>
    <span class="rule"></span>
  </div>

  <div class="container" role="navigation" aria-label="Individual tools">
    <div class="bubble" tabindex="0" onclick="location.href='fy-money-calculator.html'" aria-label="Open Financial Freedom Calculator">
      <div class="bubble-icon">💸</div>
      <span>Financial Freedom<br/>Calculator</span>
    </div>

    <div class="bubble" tabindex="0" onclick="location.href='pension-projection.html'" aria-label="Open Pension Growth Projection">
      <div class="bubble-icon">📈</div>
      <span>Pension Growth<br/>Projection</span>
    </div>

    <div class="bubble" tabindex="0" onclick="location.href='personal-balance-sheet.html'" aria-label="Open Personal Balance Sheet">
      <div class="bubble-icon">📊</div>
      <span>Personal Balance<br/>Sheet</span>
    </div>
  </div>

<section class="learn" aria-label="Watch & Learn">
  <h2 class="learn__heading">Watch & Learn</h2>

  <div class="learn__grid">

    <!-- Card 1: 60-second intro (live) -->
    <article class="learn-card learn-card--portrait">
      <button class="yt-thumb yt-thumb--tall" type="button"
        data-video-id="ZA58vuPH4CY"
        aria-haspopup="dialog" aria-controls="videoModal"
        aria-label="Watch a 60-second intro video">
        <span class="yt-thumb__badge">Short • ~1 min</span>
        <span class="yt-thumb__play" aria-hidden="true">►</span>

        <!-- Overlay text (inside the button so the whole card is clickable) -->
        <div class="learn-card__overlay">
          <h3 class="learn-card__title">60‑second intro</h3>
          <p class="learn-card__text">Why pensions are the lever in Ireland.</p>
        </div>
      </button>
    </article>

    <!-- Card 2: Full Monty explainer (placeholder) -->
    <article class="learn-card learn-card--portrait">
      <div class="yt-thumb yt-thumb--tall yt-thumb--placeholder"
        aria-label="Full Monty explainer coming soon">
        <span class="yt-thumb__play" aria-hidden="true">▶</span>
        <div class="learn-card__overlay">
          <h3 class="learn-card__title">Full Monty explainer</h3>
          <p class="learn-card__text">A walkthrough of the all‑in‑one planner. Coming soon.</p>
        </div>
      </div>
    </article>

    <!-- Card 3: Individual tools explainer (placeholder) -->
    <article class="learn-card learn-card--portrait">
      <div class="yt-thumb yt-thumb--tall yt-thumb--placeholder"
        aria-label="Individual tools explainer coming soon">
        <span class="yt-thumb__play" aria-hidden="true">▶</span>
        <div class="learn-card__overlay">
          <h3 class="learn-card__title">Individual tools explainer</h3>
          <p class="learn-card__text">Overview of each tool and when to use it. Coming soon.</p>
        </div>
      </div>
    </article>

  </div>
</section>
 </main>

 <div id="videoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="videoModalTitle" hidden>
   <div class="modal__backdrop" data-close></div>

   <div class="modal__dialog" role="document">
     <header class="modal__header">
       <h3 id="videoModalTitle">Why I built these tools</h3>
       <button class="modal__close" type="button" aria-label="Close video" data-close>✕</button>
     </header>

     <div class="modal__body">
       <div class="modal__video" data-video-mount data-video-id="ZA58vuPH4CY"></div>
       <p class="modal__caption">A quick look at Ireland’s investing reality and why pensions are the lever.</p>
     </div>
   </div>
 </div>

<script>
(function loadPortraitThumbs(){
  const buttons = document.querySelectorAll('.yt-thumb[data-video-id]');
  buttons.forEach(btn => {
    const id = btn.getAttribute('data-video-id');
    const posters = [
      `https://i.ytimg.com/vi/${id}/maxresdefault.jpg`,
      `https://i.ytimg.com/vi/${id}/hqdefault.jpg`
    ];
    (function tryLoad(i=0){
      if(i >= posters.length) return;
      const img = new Image();
      img.onload  = () => btn.style.backgroundImage = `url("${posters[i]}")`;
      img.onerror = () => tryLoad(i+1);
      img.src = posters[i];
    })();
  });
})();
</script>
<script>
(function videoThumbAndModal(){
  const thumbBtns = document.querySelectorAll('.yt-thumb[data-video-id]');
  const modal     = document.getElementById('videoModal');
  if(!thumbBtns.length || !modal) return;

  const isMobile  = window.matchMedia && window.matchMedia('(pointer: coarse)').matches;
  const mount     = modal.querySelector('[data-video-mount]');
  let lastFocus   = null;
  let iframeInjected = false;
  let hintEl = null;
  let currentId = null;
  let fsListenersBound = false;

  thumbBtns.forEach(btn => {
    btn.addEventListener('click', () => open(btn.getAttribute('data-video-id')));
  });

  function buildParams() {
    const params = new URLSearchParams({
      modestbranding:'1',
      rel:'0',
      // IMPORTANT: playsinline=0 nudges iOS to native fullscreen
      playsinline: isMobile ? '0' : '1',
      enablejsapi:'1',
      controls:'1',
      autoplay:'1',
      mute:'1',
      origin: window.location.origin
    });
    return params.toString();
  }

  function injectIframe(){
    if(iframeInjected || !mount || !currentId) return null;
    const iframe = document.createElement('iframe');
    iframe.src = `https://www.youtube-nocookie.com/embed/${currentId}?` + buildParams();
    iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen';
    iframe.setAttribute('allowfullscreen','');
    iframe.setAttribute('title','Why I built these tools');

    mount.appendChild(iframe);
    iframeInjected = true;

    // Unmute hint (preserve your current UI)
    hintEl = document.createElement('p');
    hintEl.className = 'unmute-hint';
    hintEl.textContent = 'Tip: use the player controls to unmute.';
    mount.parentElement.appendChild(hintEl);
    const hideHint = () => {
      if (hintEl) hintEl.hidden = true;
      document.removeEventListener('mousedown', hideHint);
      document.removeEventListener('touchstart', hideHint);
      document.removeEventListener('keydown', hideHint);
    };
    document.addEventListener('mousedown', hideHint);
    document.addEventListener('touchstart', hideHint);
    document.addEventListener('keydown', hideHint);

    return iframe;
  }

  function postToPlayer(iframe, command) {
    try {
      iframe.contentWindow.postMessage(JSON.stringify({
        event: 'command',
        func: command,
        args: []
      }), '*');
    } catch (e) {}
  }

  function bindFsListenersOnce() {
    if (fsListenersBound) return;
    const onFsChange = () => {
      const fsEl = document.fullscreenElement || document.webkitFullscreenElement || null;
      if (!fsEl) {
        // User exited fullscreen (swipe/X) → close modal & cleanup
        close();
      }
    };
    document.addEventListener('fullscreenchange', onFsChange, true);
    document.addEventListener('webkitfullscreenchange', onFsChange, true);
    fsListenersBound = true;
  }

  // Modal controls
  function open(id){
    currentId = id;
    lastFocus = document.activeElement;
    modal.hidden = false;
    document.documentElement.style.overflow = 'hidden';

    const iframe = injectIframe();
    modal.querySelector('.modal__close')?.focus();
    if(location.hash !== '#video') history.pushState(null, '', '#video');
    document.addEventListener('keydown', onKey);

    // Mobile: try to enter fullscreen immediately within this click gesture
    if (isMobile && iframe) {
      bindFsListenersOnce();
      // Try the Fullscreen API
      Promise.resolve()
        .then(async () => {
          if (iframe.requestFullscreen) {
            await iframe.requestFullscreen();
          } else if (iframe.webkitRequestFullscreen) {
            iframe.webkitRequestFullscreen(); // iOS/Safari fallback
          }
        })
        .catch(() => {
          // If fullscreen request is blocked, we simply fall back to YouTube UI
        })
        .finally(() => {
          // Nudge playback once the player is ready
          setTimeout(() => postToPlayer(iframe, 'playVideo'), 250);
        });

      // Safety: if the tab is hidden while in fullscreen, close modal
      const onHide = () => {
        if (document.hidden) close();
      };
      document.addEventListener('visibilitychange', onHide, { once: true, capture: true });
    }
  }

  function close(){
    modal.hidden = true;
    document.documentElement.style.overflow = '';

    // Remove iframe and hint
    if (mount) mount.innerHTML = '';
    iframeInjected = false;
    if (hintEl) { hintEl.remove(); hintEl = null; }

    document.removeEventListener('keydown', onKey);

    if(location.hash === '#video'){
      history.back();
      setTimeout(() => {
        if(location.hash === '#video') {
          history.replaceState(null, '', location.pathname + location.search);
        }
      }, 50);
    }
    lastFocus && lastFocus.focus();
  }

  function onKey(e){
    if(e.key === 'Escape') close();
    if(e.key === 'Tab') keepFocusInModal(e);
  }

  function keepFocusInModal(e){
    const focusables = modal.querySelectorAll('button,[href],input,select,textarea,[tabindex]:not([tabindex="-1"])');
    if(!focusables.length) return;
    const first = focusables[0];
    const last  = focusables[focusables.length - 1];
    if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
    else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
  }

  // Close on backdrop/X as before
  modal.addEventListener('click', (e)=>{
    if(e.target.closest('[data-close]') || e.target.classList.contains('modal__backdrop')) close();
  });

  // Keep your hash sync behavior
  window.addEventListener('hashchange', () => {
    if(!modal.hidden && location.hash !== '#video') close();
  });

  // Deep link support remains unchanged
  if(location.hash === '#video'){
    open(thumbBtns[0].getAttribute('data-video-id'));
  }
})();
</script>
</body>
</html>
